<launch>

<node pkg="rqt_robot_steering" type="rqt_robot_steering" name="rqt_robot_steering" />


<node pkg="rosserial_python" type="serial_node.py" name="rosserial_encoders" > <!--cmd_vel to tgt_velocity in m/s -->
    <param name="port" value="/dev/ttyACM1" />
    <!-- this is the nano every? inputs /--> 
    <!--param name="baud" value="9600"/-->
</node>


<node pkg="rosserial_python" type="serial_node.py" name="rosserial_motorDriver" > <!--cmd_vel to tgt_velocity in m/s -->
    <param name="port" value="/dev/ttyUSB0" /> 
    <!-- this is the regular nano? outputs /--> 
    <!--param name="baud" value="9600 "/-->
</node>


<rosparam param="base_width">0.888</rosparam> 
<node pkg="differential_drive" type="twist_to_motors.py" name="twist_to_motors" output="screen"> <!--cmd_vel to tgt_velocity in m/s -->
    <!--param name="base_width" value=".888" /-->
    <param name="base_width" value="0.888" />
    <param name="rate" value="20" />
    <param name="x_min" value="-0.5" /> 
    <param name="x_max" value="1.5" />
    <param name="r_min" value="-0.08" />
    <param name="r_max" value=".08" />
    <param name="timeout_ticks" value="7" />
    <remap from="twist" to="planb_cmd_vel" />
</node>

<rosparam param="ticks_meter">1070</rosparam>


<node pkg="differential_drive" type="alt_pid_velocity.py" name="left_pid_velocity" > <!-- lwheel tgt_velocity to pwm_val-->
    <remap from="motor_cmd" to="lmotor_pwm_cmd" />  
    <remap from="wheel_vel" to="lwheel_vel" />
    <remap from="wheel" to="leftWheel" />
    <remap from="wheel_vtarget" to="lwheel_vtarget" />
    <remap from="alt_wheel_vtarget" to="rwheel_vtarget" />
    <remap from="alt_wheel_speed" to="rwheel_vel" />
    <param name="Kp" value="350" />
    <param name="Ki" value="150" />
    <param name="Kd" value="100" />
    <param name="out_min" value="-140" />
    <param name="out_max" value="140" />
    <param name="rate" value="45" />
    <param name="rolling_pts" value="3" />
    <param name="timeout_ticks" value="15" />
    <param name="ticks_meter" value="1070.0" />
    <param name="vel_threshold" value="0.001" />
    <param name="encoder_min" value="-32768" />
    <param name="encoder_max" value="32767" />
</node>

<node pkg="differential_drive" type="alt_pid_velocity.py" name="right_pid_velocity" > <!-- rwheel tgt_velocity to pwm_val-->
    <remap from="motor_cmd" to="rmotor_pwm_cmd" />
    <remap from="wheel_vel" to="rwheel_vel" />
    <remap from="wheel" to="rightWheel" />
    <remap from="wheel_vtarget" to="rwheel_vtarget" />
    <remap from="alt_wheel_vtarget" to="lwheel_vtarget" />
    <remap from="alt_wheel_speed" to="lwheel_vel" />
    <param name="Kp" value="370" />
    <param name="Ki" value="150" />
    <param name="Kd" value="100" />
    <param name="out_min" value="-140" />
    <param name="out_max" value="140" />
    <param name="rate" value="45" />
    <param name="rolling_pts" value="3" />
    <param name="timeout_ticks" value="15" />
    <param name="ticks_meter" value="1070.0" />
    <param name="vel_threshold" value="0.001" />
    <param name="encoder_min" value="-32768" />
    <param name="encoder_max" value="32767" />
</node>

</launch>